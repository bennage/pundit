<template>

    <div>${path}</div>
    <table>
        <template repeat.for="line of lines">
            <tr class="line ${line.selected ? 'active' : ''}">
                <td class="number">
                    ${line.number}
                    <i class="add-comment fa fa-plus-square"
                        click.trigger="line.addComment()"></i>
                </td>
                <td class="text" colspan="2">${line.text}</td>
            </tr>
            <tr repeat.for="comment of line.comments"
                class="comment">
                <td>&nbsp;</td>
                <td>${comment.author.login}</td>
                <td>
                    <div>${comment.body}</div>
                </td>
            </tr>
            <tr if.bind="line.adding">
                <td colspan="3">
                    <textarea value.bind="line.newCommentBody"/>
                    <!--
                    TODO: Can we avoid binding this to the model
                          and just pass it into `postComment`?
                    -->
                    <button
                        class="btn"
                        click.trigger="line.cancelComment()">Cancel</button>
                    <button
                        class="btn btn-success"
                        click.trigger="$parent.postComment(line)">Comment</button>
                </td>
            </tr>
        </template>
    </table>

</template>
